<!doctype html>
<html>
<head>
	<title>Routing UI</title>
	<link href="routing-ui.css" rel="stylesheet" />
	<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
</head>
<body>
	
	<!-- Mapbox GL JS -->
	<link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />
	<script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
	
	<!-- Geocoder -->
	<script src="../js/lib/autocompleter/autocomplete.js"></script>
	<link href="../js/lib/autocompleter/autocomplete.css" rel="stylesheet" />
	
	<!-- Sortable -->
	<script src="../js/lib/sortablejs/Sortable.js"></script>
	
	<!-- Routing UI -->
	<script src="/.config.js"></script>
	<script src="routing-ui.js"></script>
	<script>
		document.addEventListener ('DOMContentLoaded', function (event) {
			
			// Create map
			mapboxgl.accessToken = config.mapboxApiKey;
			map = new mapboxgl.Map ({
				container: 'map',
				style: 'mapbox://styles/mapbox/outdoors-v12',
				center: [0.14172, 52.20372],
				zoom: 14,
				hash: true
			});
			map.addControl(new mapboxgl.NavigationControl ());
			
			// Add routing
			map.setPadding ({left: 300});
			//config.initialRoute = [ [0.14193, 52.20459], [0.14781, 52.20054] ];			// A-B example
			//config.initialRoute = [ null, [0.14781, 52.20054], null, [0.14781, 52.20054] ];	// No start, waypoint, empty waypoint, finish
			config.initialRoute = [ null, [0.14781, 52.20054] ];					// Finish point
			routing.initialise (config, map);
		});
	</script>
	
	<div id="mapcontainer">
		<div id="routeplanning">
			<h1>Journey planner</h1>
			<div id="resultstabspanel">
				<ul id="geocoders">
					<li><span class="handle">||</span><input type="text" spellcheck="false" autocorrect="off" placeholder="Search or tap map" /> <a href="#clear">&#x2715;</a></li>
					<li><span class="handle">||</span><input type="text" spellcheck="false" autocorrect="off" placeholder="Search or tap map" /> <a href="#clear">&#x2715;</a></li>
				</ul>
				<div id="waypointsdebug"></div>
			</div>
		</div>
		<div id="map"></div>
	</div>
	
</body>
</html>

